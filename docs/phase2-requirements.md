# PrepFeed ä»•æ§˜æ›¸ï¼ˆPhase 2 å®Œå…¨ç‰ˆï¼‰

**ã‚µãƒ¼ãƒ“ã‚¹å**: PrepFeed  
**ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«**: åˆ†æã¯AIã«ä»»ã›ã‚‹ã€‚ãã®å‰ã ã‘è‡ªå‹•åŒ–ã€‚  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0  
**æœ€çµ‚æ›´æ–°**: 2026å¹´1æœˆ  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 2 è¨­è¨ˆå®Œäº†  
**ãƒ™ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: YouTubeã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆPhase 1ï¼‰  
**æœ¬ç•ªURL**: https://prepfeed.vercel.app

---

## ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ](#2-ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ)
3. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#3-æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
4. [ã‚¤ãƒ³ãƒ•ãƒ©æˆ¦ç•¥](#4-ã‚¤ãƒ³ãƒ•ãƒ©æˆ¦ç•¥)
5. [èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ](#5-èªè¨¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ)
6. [Google OAuthé€£æº](#6-google-oauthé€£æº)
7. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#7-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
8. [APIä»•æ§˜](#8-apiä»•æ§˜)
9. [ãƒãƒƒãƒå‡¦ç†è¨­è¨ˆ](#9-ãƒãƒƒãƒå‡¦ç†è¨­è¨ˆ)
10. [Google Sheetsè¨­è¨ˆ](#10-google-sheetsè¨­è¨ˆ)
11. [ãƒšãƒ¼ã‚¸ãƒ»UIè¨­è¨ˆ](#11-ãƒšãƒ¼ã‚¸uiè¨­è¨ˆ)
12. [å¤–éƒ¨APIä»•æ§˜](#12-å¤–éƒ¨apiä»•æ§˜)
13. [å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](#13-å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—)
14. [å°†æ¥æ‹¡å¼µ](#14-å°†æ¥æ‹¡å¼µ)

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

PrepFeed ã¯ã€åˆ†æã‚’è¡Œã†ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯ **AIï¼ˆNotebookLM ç­‰ï¼‰ãŒåˆ†æã—ã‚„ã™ã„ãƒ‡ãƒ¼ã‚¿ã‚’ã€è‡ªå‹•ã§åé›†ãƒ»æ•´ç†ãƒ»è“„ç©ã™ã‚‹ã“ã¨** ã«ç‰¹åŒ–ã—ãŸ Web ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œä½•ã‚’åˆ†æã™ã‚‹ã‹ã€ã‚’è€ƒãˆã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
PrepFeed ãŒç”¨æ„ã—ãŸç´ æã‚’ AI ã«æ¸¡ã™ã“ã¨ã§ã€åˆ†æãƒ»è€ƒå¯Ÿãƒ»ã‚¢ã‚¤ãƒ‡ã‚¢æŠ½å‡ºã¯ã™ã¹ã¦ AI ã«å§”ã­ã¾ã™ã€‚

### 1.2 è§£æ±ºã—ãŸã„èª²é¡Œ

- ãƒã‚¿æ¢ã—ã‚„ãƒˆãƒ¬ãƒ³ãƒ‰åé›†ãŒé¢å€’
- åˆ†æãƒ„ãƒ¼ãƒ«ã¯é›£ã—ãã¦ä½¿ãˆãªã„
- NotebookLM ã¯ä¾¿åˆ©ã ãŒã€äº‹å‰ã®ãƒ‡ãƒ¼ã‚¿æº–å‚™ãŒå¤§å¤‰
- URLè²¼ã‚Šä»˜ã‘ã‚„æƒ…å ±æ•´ç†ã«æ™‚é–“ãŒã‹ã‹ã‚‹

PrepFeed ã¯ **ã€Œåˆ†æå‰ã®ä¸€ç•ªã—ã‚“ã©ã„å·¥ç¨‹ã€** ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ã€‚

### 1.3 æƒ³å®šãƒ¦ãƒ¼ã‚¶ãƒ¼

- note / ãƒ–ãƒ­ã‚° / æŠ€è¡“è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹äºº
- ãƒã‚¿åˆ‡ã‚Œãƒ»æ–¹å‘æ€§ã«æ‚©ã‚“ã§ã„ã‚‹äºº
- åˆ†æãŒè‹¦æ‰‹ã€ã‚‚ã—ãã¯ã‚„ã‚ŠãŸããªã„äºº
- NotebookLM ã‚„ AI åˆ†æãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„å§‹ã‚ãŸäºº
- YouTubeã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼
- å‹•ç”»ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“è€…

### 1.4 ã‚µãƒ¼ãƒ“ã‚¹æ–¹é‡

**ã‚„ã‚‹ã“ã¨**:

- ãƒ‡ãƒ¼ã‚¿ã‚’ç¶™ç¶šçš„ã«é›†ã‚ã‚‹
- AI ãŒæ‰±ã„ã‚„ã™ã„å½¢ã«æ•´ç†ã™ã‚‹
- æ™‚ç³»åˆ—ã§è“„ç©ã™ã‚‹

**ã‚„ã‚‰ãªã„ã“ã¨ï¼ˆæ˜ç¤ºï¼‰**:

- åˆ†æçµæœã®æç¤º
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚ˆã‚‹å¯è¦–åŒ–
- äºˆæ¸¬ãƒ»ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ãƒ»è©•ä¾¡

> PrepFeed ã¯ã€Œè€ƒãˆã‚‹å‰ã€ã¾ã§ã‚’æ‹…å½“ã—ã¾ã™ã€‚

---

## 2. ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ

### 2.1 æ©Ÿèƒ½éšå±¤

```
PrepFeed
â”œâ”€â”€ ğŸ†“ ç„¡æ–™æ©Ÿèƒ½ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ãƒ»åˆ†æï¼‰
â”‚   â”œâ”€â”€ YouTube
â”‚   â”‚   â”œâ”€â”€ ãƒãƒ£ãƒ³ãƒãƒ«æ¤œç´¢ â†’ äººæ°—å‹•ç”»50æœ¬è¡¨ç¤º
â”‚   â”‚   â””â”€â”€ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ â†’ äººæ°—å‹•ç”»50æœ¬è¡¨ç¤º
â”‚   â”œâ”€â”€ Qiita
â”‚   â”‚   â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ â†’ äººæ°—è¨˜äº‹50æœ¬è¡¨ç¤º
â”‚   â”‚   â””â”€â”€ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ â†’ äººæ°—è¨˜äº‹50æœ¬è¡¨ç¤º
â”‚   â””â”€â”€ Zenn
â”‚       â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ â†’ äººæ°—è¨˜äº‹50æœ¬è¡¨ç¤º
â”‚       â””â”€â”€ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ â†’ äººæ°—è¨˜äº‹50æœ¬è¡¨ç¤º
â”‚
â””â”€â”€ ğŸ’ æœ‰æ–™æ©Ÿèƒ½ï¼ˆç›£è¦–ãƒ»è‡ªå‹•åé›†ï¼‰
    â”œâ”€â”€ ç›£è¦–è¨­å®šã®ç™»éŒ²ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ / ãƒãƒ£ãƒ³ãƒãƒ« / ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
    â”œâ”€â”€ æ¯æ—¥è‡ªå‹•ã§ãƒ‡ãƒ¼ã‚¿åé›†ï¼ˆåˆå‰3æ™‚ JSTï¼‰
    â”œâ”€â”€ Google Sheetsã«è“„ç©ï¼ˆUpsertæ–¹å¼ï¼‰
    â””â”€â”€ NotebookLMã§åˆ†æå¯èƒ½ãªå½¢å¼ã§å‡ºåŠ›
```

### 2.2 å¯¾è±¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | ç”¨é€”         | å„ªå…ˆåº¦              |
| ---------------- | ------------ | ------------------- |
| YouTube          | å‹•ç”»ãƒˆãƒ¬ãƒ³ãƒ‰ | ä¸»è»¸ï¼ˆPhase 1ç¶™æ‰¿ï¼‰ |
| Qiita            | æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ | Phase 2             |
| Zenn             | æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ | Phase 2             |
| TikTok           | å°†æ¥æ‹¡å¼µ     | Phase 3ä»¥é™         |
| note             | å°†æ¥æ‹¡å¼µ     | Phase 3ä»¥é™         |

### 2.3 ã‚½ãƒ¼ãƒˆå¯èƒ½ãªæŒ‡æ¨™

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | ã‚½ãƒ¼ãƒˆé …ç›®                                   |
| ---------------- | -------------------------------------------- |
| YouTube          | å†ç”Ÿæ•°ã€æŠ•ç¨¿æ—¥ã€ä¼¸ã³ç‡ã€ã‚³ãƒ¡ãƒ³ãƒˆæ•°ã€ã„ã„ã­æ•° |
| Qiita            | ã„ã„ã­æ•°ã€æŠ•ç¨¿æ—¥ã€ã‚¹ãƒˆãƒƒã‚¯æ•°                 |
| Zenn             | ã„ã„ã­æ•°ã€æŠ•ç¨¿æ—¥                             |

---

## 3. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 3.1 ã‚³ã‚¢æŠ€è¡“

| ã‚«ãƒ†ã‚´ãƒª       | æŠ€è¡“                 | ãƒãƒ¼ã‚¸ãƒ§ãƒ³   | å‚™è€ƒ                   |
| -------------- | -------------------- | ------------ | ---------------------- |
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Next.js (App Router) | 15.x         | Edge Runtimeäº’æ›ã‚’æ„è­˜ |
| UI             | React                | 19.x         |                        |
| è¨€èª           | TypeScript           | 5.x          | strict mode            |
| ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°   | Tailwind CSS         | 3.x          |                        |
| çŠ¶æ…‹ç®¡ç†       | Zustand              | 5.x          |                        |
| ãƒãƒ£ãƒ¼ãƒˆ       | Recharts             | 3.x          |                        |
| ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ | Framer Motion        | 12.x         |                        |
| ã‚¢ã‚¤ã‚³ãƒ³       | Lucide React         | 0.5x         |                        |
| ãƒ•ã‚©ãƒ³ãƒˆ       | Noto Sans JP         | Google Fonts |                        |

### 3.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©

| ã‚µãƒ¼ãƒ“ã‚¹          | ç”¨é€”                   | å‚™è€ƒ                         |
| ----------------- | ---------------------- | ---------------------------- |
| Vercel            | ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ | é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæ®µéš             |
| Cloudflare Pages  | ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°           | æœ¬ç•ªç§»è¡Œå…ˆï¼ˆèª²é‡‘æ©Ÿèƒ½å®Ÿè£…æ™‚ï¼‰ |
| Supabase          | èªè¨¼ãƒ»è¨­å®šDB           | PostgreSQL + Auth            |
| Vercel KV         | ã‚­ãƒ£ãƒƒã‚·ãƒ¥             | é–‹ç™ºæ®µéš                     |
| Cloudflare KV     | ã‚­ãƒ£ãƒƒã‚·ãƒ¥             | æœ¬ç•ªç§»è¡Œå¾Œ                   |
| Google Sheets API | ãƒ‡ãƒ¼ã‚¿ä¿å­˜             | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒ‰ãƒ©ã‚¤ãƒ–       |

### 3.3 å¤–éƒ¨API

| API                 | ç”¨é€”                   | èªè¨¼             |
| ------------------- | ---------------------- | ---------------- |
| YouTube Data API v3 | å‹•ç”»ãƒ»ãƒãƒ£ãƒ³ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ | APIã‚­ãƒ¼          |
| Qiita API v2        | è¨˜äº‹ãƒ‡ãƒ¼ã‚¿             | ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ |
| Zenn å†…éƒ¨API        | è¨˜äº‹ãƒ‡ãƒ¼ã‚¿             | ä¸è¦ï¼ˆéå…¬å¼ï¼‰   |
| Google Sheets API   | ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ“ä½œ   | OAuth 2.0        |

---

## 4. ã‚¤ãƒ³ãƒ•ãƒ©æˆ¦ç•¥

### 4.1 æ®µéšçš„ç§»è¡Œè¨ˆç”»

```
Phase 2a: é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæ®µéš
â”œâ”€â”€ ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°: Vercel
â”œâ”€â”€ ã‚­ãƒ£ãƒƒã‚·ãƒ¥: Vercel KV
â”œâ”€â”€ Cron: Vercel Cron
â””â”€â”€ ç›®çš„: è¿…é€Ÿãªé–‹ç™ºãƒ»Phase 1è³‡ç”£ã®æ´»ç”¨

Phase 2b: æœ¬ç•ªç§»è¡Œæ®µéšï¼ˆèª²é‡‘æ©Ÿèƒ½å®Ÿè£…æ™‚ï¼‰
â”œâ”€â”€ ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°: Cloudflare Pages
â”œâ”€â”€ ã‚­ãƒ£ãƒƒã‚·ãƒ¥: Cloudflare KV
â”œâ”€â”€ Cron: Cloudflare Workers (Scheduled)
â””â”€â”€ ç›®çš„: ç„¡æ–™æ ã®æ´»ç”¨ãƒ»å•†ç”¨åˆ©ç”¨å¯¾å¿œ
```

### 4.2 Cloudflareç§»è¡Œã‚’è¦‹æ®ãˆãŸè¨­è¨ˆæ–¹é‡

| é …ç›®       | æ–¹é‡                                                |
| ---------- | --------------------------------------------------- |
| API Routes | Edge Runtimeäº’æ›ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã                      |
| ç’°å¢ƒå¤‰æ•°   | Vercel/Cloudflareä¸¡å¯¾å¿œã®å‘½å                       |
| KVæ“ä½œ     | æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¨­ã‘ã¦åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ã«                |
| Cron       | `/api/batch` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å…±é€šã€ãƒˆãƒªã‚¬ãƒ¼ã®ã¿å¤‰æ›´ |

### 4.3 ç§»è¡Œæ™‚ã®å¤‰æ›´ç‚¹ï¼ˆäºˆå®šï¼‰

| é …ç›®        | Vercel                        | Cloudflare                       |
| ----------- | ----------------------------- | -------------------------------- |
| next.config | `serverExternalPackages` è¨­å®š | `@cloudflare/next-on-pages` è¨­å®š |
| KV          | `@vercel/kv`                  | `@cloudflare/workers-kv`         |
| Cron        | `vercel.json` ã® crons        | `wrangler.toml` ã® triggers      |
| ãƒ“ãƒ«ãƒ‰      | `next build`                  | `npx @cloudflare/next-on-pages`  |

---

## 5. èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 5.1 èªè¨¼ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      èªè¨¼ãƒ•ãƒ­ãƒ¼                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒGoogleã§ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’ã‚¯ãƒªãƒƒã‚¯                   â”‚
â”‚                    â†“                                        â”‚
â”‚  2. Supabase Auth ãŒ Google OAuth ã‚’å‡¦ç†                     â”‚
â”‚                    â†“                                        â”‚
â”‚  3. èªè¨¼æˆåŠŸ â†’ Supabase ã« user ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ                  â”‚
â”‚                    â†“                                        â”‚
â”‚  4. profiles ãƒ†ãƒ¼ãƒ–ãƒ«ã«åˆæœŸãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆãƒˆãƒªã‚¬ãƒ¼ï¼‰              â”‚
â”‚                    â†“                                        â”‚
â”‚  5. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

| é …ç›®           | è¨­å®š                           |
| -------------- | ------------------------------ |
| èªè¨¼æ–¹å¼       | Supabase Authï¼ˆGoogle OAuthï¼‰  |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† | Supabase ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆJWTï¼‰     |
| RLS            | å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«é©ç”¨               |
| APIã‚­ãƒ¼ä¿è­·    | ç’°å¢ƒå¤‰æ•° + ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã¿  |
| ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆ | 10ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†/IPï¼ˆç„¡æ–™æ©Ÿèƒ½ï¼‰ |

### 5.3 Row Level Security (RLS) ãƒãƒªã‚·ãƒ¼

```sql
-- profiles ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Users can view own profile"
  ON profiles FOR SELECT
  USING (auth.uid() = id);

CREATE POLICY "Users can update own profile"
  ON profiles FOR UPDATE
  USING (auth.uid() = id);

-- monitor_settings ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Users can view own settings"
  ON monitor_settings FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own settings"
  ON monitor_settings FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own settings"
  ON monitor_settings FOR UPDATE
  USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own settings"
  ON monitor_settings FOR DELETE
  USING (auth.uid() = user_id);
```

---

## 6. Google OAuthé€£æº

### 6.1 é€£æºãƒ•ãƒ­ãƒ¼ï¼ˆGoogle Sheets ã‚¢ã‚¯ã‚»ã‚¹ç”¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Google Sheets é€£æºãƒ•ãƒ­ãƒ¼                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒGoogleãƒ‰ãƒ©ã‚¤ãƒ–é€£æºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯           â”‚
â”‚                    â†“                                        â”‚
â”‚  2. Google OAuth åŒæ„ç”»é¢ã‚’è¡¨ç¤º                              â”‚
â”‚     - ã‚¹ã‚³ãƒ¼ãƒ—: google sheets (spreadsheets)                â”‚
â”‚     - ã‚¹ã‚³ãƒ¼ãƒ—: google drive (fileä½œæˆç”¨)                   â”‚
â”‚                    â†“                                        â”‚
â”‚  3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨±å¯                                           â”‚
â”‚                    â†“                                        â”‚
â”‚  4. ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ + ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—                â”‚
â”‚                    â†“                                        â”‚
â”‚  5. ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ Supabase ã«æš—å·åŒ–ä¿å­˜              â”‚
â”‚                    â†“                                        â”‚
â”‚  6. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‰ãƒ©ã‚¤ãƒ–ã«ã€ŒPrepFeed_ãƒ‡ãƒ¼ã‚¿ã€ã‚·ãƒ¼ãƒˆè‡ªå‹•ä½œæˆ      â”‚
â”‚                    â†“                                        â”‚
â”‚  7. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆIDã‚’ profiles ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 å¿…è¦ãªOAuthã‚¹ã‚³ãƒ¼ãƒ—

```
https://www.googleapis.com/auth/spreadsheets
https://www.googleapis.com/auth/drive.file
```

### 6.3 ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†

| é …ç›®                 | èª¬æ˜                              |
| -------------------- | --------------------------------- |
| ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³     | 1æ™‚é–“ã§æœŸé™åˆ‡ã‚Œã€éƒ½åº¦ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ |
| ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ | Supabaseã«æš—å·åŒ–ä¿å­˜ã€é•·æœŸæœ‰åŠ¹    |
| ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ | ãƒãƒƒãƒå‡¦ç†é–‹å§‹æ™‚ã«è‡ªå‹•å®Ÿè¡Œ        |

---

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 7.1 Supabase ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

#### profilesï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ã‚«ãƒ©ãƒ                | å‹          | èª¬æ˜                             | åˆ¶ç´„               |
| -------------------- | ----------- | -------------------------------- | ------------------ |
| id                   | uuid        | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID                       | PK, FK(auth.users) |
| email                | text        | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹                   | NOT NULL           |
| display_name         | text        | è¡¨ç¤ºå                           |                    |
| avatar_url           | text        | ã‚¢ãƒã‚¿ãƒ¼URL                      |                    |
| spreadsheet_id       | text        | Google Spreadsheetã®ID           |                    |
| google_refresh_token | text        | æš—å·åŒ–ã•ã‚ŒãŸãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ |                    |
| is_premium           | boolean     | æœ‰æ–™ãƒ—ãƒ©ãƒ³ãƒ•ãƒ©ã‚°                 | DEFAULT false      |
| created_at           | timestamptz | ä½œæˆæ—¥æ™‚                         | DEFAULT now()      |
| updated_at           | timestamptz | æ›´æ–°æ—¥æ™‚                         | DEFAULT now()      |

#### monitor_settingsï¼ˆç›£è¦–è¨­å®šï¼‰

| ã‚«ãƒ©ãƒ           | å‹          | èª¬æ˜                       | åˆ¶ç´„                                   |
| --------------- | ----------- | -------------------------- | -------------------------------------- |
| id              | uuid        | è¨­å®šID                     | PK, DEFAULT uuid_generate_v4()         |
| user_id         | uuid        | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID                 | FK(profiles.id), NOT NULL              |
| platform        | text        | ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ            | NOT NULL, CHECK (youtube/qiita/zenn)   |
| type            | text        | ç›£è¦–ã‚¿ã‚¤ãƒ—                 | NOT NULL, CHECK (keyword/channel/user) |
| value           | text        | æ¤œç´¢å€¤ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ or IDï¼‰ | NOT NULL                               |
| display_name    | text        | è¡¨ç¤ºåï¼ˆãƒãƒ£ãƒ³ãƒãƒ«åç­‰ï¼‰   |                                        |
| fetch_count     | integer     | å–å¾—ä»¶æ•°                   | DEFAULT 50, CHECK (50/100/200)         |
| is_active       | boolean     | æœ‰åŠ¹ãƒ•ãƒ©ã‚°                 | DEFAULT true                           |
| last_fetched_at | timestamptz | æœ€çµ‚å–å¾—æ—¥æ™‚               |                                        |
| created_at      | timestamptz | ä½œæˆæ—¥æ™‚                   | DEFAULT now()                          |
| updated_at      | timestamptz | æ›´æ–°æ—¥æ™‚                   | DEFAULT now()                          |

#### fetch_logsï¼ˆå–å¾—ãƒ­ã‚°ï¼‰

| ã‚«ãƒ©ãƒ         | å‹          | èª¬æ˜             | åˆ¶ç´„                            |
| ------------- | ----------- | ---------------- | ------------------------------- |
| id            | uuid        | ãƒ­ã‚°ID           | PK, DEFAULT uuid_generate_v4()  |
| user_id       | uuid        | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID       | FK(profiles.id), NOT NULL       |
| setting_id    | uuid        | ç›£è¦–è¨­å®šID       | FK(monitor_settings.id)         |
| platform      | text        | ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | NOT NULL                        |
| status        | text        | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹       | NOT NULL, CHECK (success/error) |
| records_count | integer     | å–å¾—ä»¶æ•°         |                                 |
| error_message | text        | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |                                 |
| executed_at   | timestamptz | å®Ÿè¡Œæ—¥æ™‚         | DEFAULT now()                   |

### 7.2 ERå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    profiles     â”‚       â”‚  monitor_settings   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚â”€â”€â”    â”‚ id (PK)             â”‚
â”‚ email           â”‚  â”‚    â”‚ user_id (FK)     â—„â”€â”€â”¼â”€â”€â”
â”‚ display_name    â”‚  â”‚    â”‚ platform            â”‚  â”‚
â”‚ spreadsheet_id  â”‚  â”‚    â”‚ type                â”‚  â”‚
â”‚ google_refresh_ â”‚  â”‚    â”‚ value               â”‚  â”‚
â”‚   token         â”‚  â”‚    â”‚ display_name        â”‚  â”‚
â”‚ is_premium      â”‚  â”‚    â”‚ fetch_count         â”‚  â”‚
â”‚ created_at      â”‚  â”‚    â”‚ is_active           â”‚  â”‚
â”‚ updated_at      â”‚  â”‚    â”‚ last_fetched_at     â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ created_at          â”‚  â”‚
                     â”‚    â”‚ updated_at          â”‚  â”‚
                     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”‚                             â”‚
                     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                     â”‚    â”‚    fetch_logs       â”‚  â”‚
                     â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                     â”‚    â”‚ id (PK)             â”‚  â”‚
                     â””â”€â”€â”€â–ºâ”‚ user_id (FK)        â”‚  â”‚
                          â”‚ setting_id (FK)  â—„â”€â”€â”¼â”€â”€â”˜
                          â”‚ platform            â”‚
                          â”‚ status              â”‚
                          â”‚ records_count       â”‚
                          â”‚ error_message       â”‚
                          â”‚ executed_at         â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

```sql
CREATE INDEX idx_monitor_settings_user_id ON monitor_settings(user_id);
CREATE INDEX idx_monitor_settings_active ON monitor_settings(is_active) WHERE is_active = true;
CREATE INDEX idx_fetch_logs_user_id ON fetch_logs(user_id);
CREATE INDEX idx_fetch_logs_executed_at ON fetch_logs(executed_at DESC);
```

---

## 8. APIä»•æ§˜

### 8.1 æ—¢å­˜APIï¼ˆPhase 1ç¶™æ‰¿ï¼‰

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ              | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜           |
| --------------------------- | -------- | -------------- |
| `/api/youtube/search`       | GET      | ãƒãƒ£ãƒ³ãƒãƒ«æ¤œç´¢ |
| `/api/youtube/channel/[id]` | GET      | ãƒãƒ£ãƒ³ãƒãƒ«è©³ç´° |
| `/api/youtube/keyword`      | GET      | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ |

### 8.2 æ–°è¦APIï¼ˆPhase 2ï¼‰

#### Qiita API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ         | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜               |
| ---------------------- | -------- | ------------------ |
| `/api/qiita/user/[id]` | GET      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨˜äº‹ä¸€è¦§ |
| `/api/qiita/keyword`   | GET      | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢     |

**Qiita ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨˜äº‹å–å¾—**

```
GET /api/qiita/user/[id]?limit=50

Response:
{
  user: {
    id: string,
    name: string,
    profile_image_url: string,
    items_count: number,
    followers_count: number
  },
  articles: [
    {
      id: string,
      title: string,
      url: string,
      published_at: string,
      likes_count: number,
      stocks_count: number,
      tags: string[],
      // è¨ˆç®—æŒ‡æ¨™
      days_from_published: number,
      growth_rate: number
    }
  ]
}
```

#### Zenn API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ              | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜                       |
| --------------------------- | -------- | -------------------------- |
| `/api/zenn/user/[username]` | GET      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨˜äº‹ä¸€è¦§         |
| `/api/zenn/keyword`         | GET      | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆãƒˆãƒ”ãƒƒã‚¯ï¼‰ |

**Zenn ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨˜äº‹å–å¾—**

```
GET /api/zenn/user/[username]?limit=50

Response:
{
  user: {
    username: string,
    name: string,
    avatar_url: string,
    articles_count: number
  },
  articles: [
    {
      id: string,
      title: string,
      url: string,
      published_at: string,
      liked_count: number,
      // è¨ˆç®—æŒ‡æ¨™
      days_from_published: number,
      growth_rate: number
    }
  ]
}
```

#### ç›£è¦–è¨­å®šAPI

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ       | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜         |
| -------------------- | -------- | ------------ |
| `/api/settings`      | GET      | è¨­å®šä¸€è¦§å–å¾— |
| `/api/settings`      | POST     | è¨­å®šè¿½åŠ      |
| `/api/settings/[id]` | PUT      | è¨­å®šæ›´æ–°     |
| `/api/settings/[id]` | DELETE   | è¨­å®šå‰Šé™¤     |

**è¨­å®šè¿½åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**

```
POST /api/settings

Body:
{
  platform: "youtube" | "qiita" | "zenn",
  type: "keyword" | "channel" | "user",
  value: string,
  display_name?: string,
  fetch_count: 50 | 100 | 200
}

Response:
{
  success: true,
  setting: { ... },
  initial_fetch: {
    status: "success" | "error",
    records_count: number
  }
}
```

#### ãƒãƒƒãƒAPI

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ      | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜                     |
| ------------------- | -------- | ------------------------ |
| `/api/batch`        | POST     | ãƒãƒƒãƒå‡¦ç†å®Ÿè¡Œï¼ˆCronç”¨ï¼‰ |
| `/api/batch/manual` | POST     | æ‰‹å‹•ãƒãƒƒãƒå®Ÿè¡Œï¼ˆç®¡ç†ç”¨ï¼‰ |

#### Googleé€£æºAPI

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ           | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜              |
| ------------------------ | -------- | ----------------- |
| `/api/google/auth`       | GET      | OAuthèªè¨¼é–‹å§‹     |
| `/api/google/callback`   | GET      | OAuthã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| `/api/google/disconnect` | POST     | é€£æºè§£é™¤          |

---

## 9. ãƒãƒƒãƒå‡¦ç†è¨­è¨ˆ

### 9.1 å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| é …ç›®            | è¨­å®š                                  |
| --------------- | ------------------------------------- |
| å®Ÿè¡Œæ™‚åˆ»        | æ¯æ—¥ åˆå‰3æ™‚ï¼ˆJSTï¼‰                   |
| Vercel Cronè¨­å®š | `0 18 * * *`ï¼ˆUTC 18:00 = JST 03:00ï¼‰ |

### 9.2 ãƒãƒƒãƒå‡¦ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒãƒƒãƒå‡¦ç†ãƒ•ãƒ­ãƒ¼                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. Vercel Cron ãŒãƒˆãƒªã‚¬ãƒ¼ï¼ˆæ¯æ—¥ 03:00 JSTï¼‰                 â”‚
â”‚                    â†“                                        â”‚
â”‚  2. ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªç›£è¦–è¨­å®šã‚’å…¨ä»¶å–å¾—                           â”‚
â”‚                    â†“                                        â”‚
â”‚  3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–                                 â”‚
â”‚                    â†“                                        â”‚
â”‚  4. å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‡¦ç†:                                       â”‚
â”‚     a. Google ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥                        â”‚
â”‚     b. ç›£è¦–è¨­å®šã”ã¨ã«ãƒ‡ãƒ¼ã‚¿å–å¾—                             â”‚
â”‚        - YouTube: Data API v3                              â”‚
â”‚        - Qiita: API v2                                     â”‚
â”‚        - Zenn: å†…éƒ¨API                                     â”‚
â”‚     c. Google Sheets ã« Upsert                             â”‚
â”‚     d. fetch_logs ã«è¨˜éŒ²                                   â”‚
â”‚                    â†“                                        â”‚
â”‚  5. å‡¦ç†å®Œäº†ãƒ­ã‚°å‡ºåŠ›                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 åˆå›å–å¾—ãƒ•ãƒ­ãƒ¼

ç›£è¦–è¨­å®šç™»éŒ²æ™‚ã«å³åº§ã«å®Ÿè¡Œï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åˆå›å–å¾—ãƒ•ãƒ­ãƒ¼                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›£è¦–è¨­å®šã‚’ç™»éŒ²                                 â”‚
â”‚                    â†“                                        â”‚
â”‚  2. DB ã« monitor_settings ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ                     â”‚
â”‚                    â†“                                        â”‚
â”‚  3. å³åº§ã«ãƒ‡ãƒ¼ã‚¿å–å¾—å‡¦ç†ã‚’å®Ÿè¡Œ                               â”‚
â”‚     - æŒ‡å®šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®APIã‚’å‘¼ã³å‡ºã—                    â”‚
â”‚     - æŒ‡å®šä»¶æ•°ï¼ˆ50/100/200ï¼‰ã‚’å–å¾—                          â”‚
â”‚                    â†“                                        â”‚
â”‚  4. Google Sheets ã«æ›¸ãè¾¼ã¿                                â”‚
â”‚                    â†“                                        â”‚
â”‚  5. last_fetched_at ã‚’æ›´æ–°                                  â”‚
â”‚                    â†“                                        â”‚
â”‚  6. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å®Œäº†é€šçŸ¥ï¼ˆUIæ›´æ–°ï¼‰                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.4 Upsertï¼ˆå·®åˆ†æ›´æ–°ï¼‰ãƒ­ã‚¸ãƒƒã‚¯

```typescript
async function upsertToSheet(
  sheets: sheets_v4.Sheets,
  spreadsheetId: string,
  sheetName: string,
  data: Record<string, any>[],
  idColumn: string,
): Promise<void> {
  // 1. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  const existingData = await getSheetData(sheets, spreadsheetId, sheetName);

  // 2. IDã§ãƒãƒƒãƒ—åŒ–
  const existingMap = new Map(existingData.map((row) => [row[idColumn], row]));

  // 3. å·®åˆ†åˆ¤å®š
  for (const item of data) {
    const existing = existingMap.get(item[idColumn]);

    if (existing) {
      // æ›´æ–°: å¤‰å‹•å€¤ã®ã¿ä¸Šæ›¸ã
      await updateRow(
        sheets,
        spreadsheetId,
        sheetName,
        item,
        existing.rowIndex,
      );
    } else {
      // æ–°è¦: è¡Œã‚’è¿½åŠ 
      await appendRow(sheets, spreadsheetId, sheetName, item);
    }
  }
}
```

### 9.5 å–å¾—ä»¶æ•°ã¨å®Ÿè¡Œæ™‚é–“

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | Lite (50ä»¶) | Deep (100ä»¶) | Max (200ä»¶)  |
| ---------------- | ----------- | ------------ | ------------ |
| YouTube          | 1å›ã§å®Œäº†   | 2å›APIã‚³ãƒ¼ãƒ« | 4å›APIã‚³ãƒ¼ãƒ« |
| Qiita            | 1å›ã§å®Œäº†   | 1å›ã§å®Œäº†    | 2å›APIã‚³ãƒ¼ãƒ« |
| Zenn             | 1å›ã§å®Œäº†   | 1å›ã§å®Œäº†    | 2å›APIã‚³ãƒ¼ãƒ« |

â€» ã™ã¹ã¦1å›ã®ãƒãƒƒãƒå‡¦ç†ã§å®Œäº†ï¼ˆè¤‡æ•°æ—¥ã«åˆ†å‰²ã—ãªã„ï¼‰

---

## 10. Google Sheetsè¨­è¨ˆ

### 10.1 ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ§‹æˆ

```
PrepFeed_ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆåï¼‰
â”œâ”€â”€ YouTubeï¼ˆã‚·ãƒ¼ãƒˆ1ï¼‰
â”œâ”€â”€ Qiitaï¼ˆã‚·ãƒ¼ãƒˆ2ï¼‰
â””â”€â”€ Zennï¼ˆã‚·ãƒ¼ãƒˆ3ï¼‰
```

### 10.2 ã‚·ãƒ¼ãƒˆåˆ—å®šç¾©

#### YouTube ã‚·ãƒ¼ãƒˆ

| åˆ—  | ã‚«ãƒ©ãƒ å    | èª¬æ˜                 | æ›´æ–°å¯¾è±¡ |
| --- | ----------- | -------------------- | -------- |
| A   | ID          | å‹•ç”»ID               | Ã—        |
| B   | Title       | ã‚¿ã‚¤ãƒˆãƒ«             | Ã—        |
| C   | URL         | å‹•ç”»URL              | Ã—        |
| D   | PublishedAt | æŠ•ç¨¿æ—¥               | Ã—        |
| E   | ChannelId   | ãƒãƒ£ãƒ³ãƒãƒ«ID         | Ã—        |
| F   | ChannelName | ãƒãƒ£ãƒ³ãƒãƒ«å         | Ã—        |
| G   | Views       | å†ç”Ÿæ•°               | â—‹        |
| H   | Likes       | ã„ã„ã­æ•°             | â—‹        |
| I   | Comments    | ã‚³ãƒ¡ãƒ³ãƒˆæ•°           | â—‹        |
| J   | Duration    | å‹•ç”»æ™‚é–“             | Ã—        |
| K   | Tags        | ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ | Ã—        |
| L   | GrowthRate  | 1æ—¥ã‚ãŸã‚Šå†ç”Ÿæ•°      | â—‹        |
| M   | LikeRate    | ã„ã„ã­ç‡ï¼ˆ%ï¼‰        | â—‹        |
| N   | CommentRate | ã‚³ãƒ¡ãƒ³ãƒˆç‡ï¼ˆ%ï¼‰      | â—‹        |
| O   | Keyword     | å–å¾—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰       | Ã—        |
| P   | MonitorType | ç›£è¦–ã‚¿ã‚¤ãƒ—           | Ã—        |
| Q   | LastUpdated | æœ€çµ‚æ›´æ–°æ—¥æ™‚         | â—‹        |

#### Qiita ã‚·ãƒ¼ãƒˆ

| åˆ—  | ã‚«ãƒ©ãƒ å    | èª¬æ˜                 | æ›´æ–°å¯¾è±¡ |
| --- | ----------- | -------------------- | -------- |
| A   | ID          | è¨˜äº‹ID               | Ã—        |
| B   | Title       | ã‚¿ã‚¤ãƒˆãƒ«             | Ã—        |
| C   | URL         | è¨˜äº‹URL              | Ã—        |
| D   | PublishedAt | æŠ•ç¨¿æ—¥               | Ã—        |
| E   | AuthorId    | è‘—è€…ID               | Ã—        |
| F   | AuthorName  | è‘—è€…å               | Ã—        |
| G   | Likes       | ã„ã„ã­æ•°             | â—‹        |
| H   | Stocks      | ã‚¹ãƒˆãƒƒã‚¯æ•°           | â—‹        |
| I   | Tags        | ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ | Ã—        |
| J   | GrowthRate  | 1æ—¥ã‚ãŸã‚Šã„ã„ã­æ•°    | â—‹        |
| K   | Keyword     | å–å¾—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰       | Ã—        |
| L   | MonitorType | ç›£è¦–ã‚¿ã‚¤ãƒ—           | Ã—        |
| M   | LastUpdated | æœ€çµ‚æ›´æ–°æ—¥æ™‚         | â—‹        |

#### Zenn ã‚·ãƒ¼ãƒˆ

| åˆ—  | ã‚«ãƒ©ãƒ å       | èª¬æ˜              | æ›´æ–°å¯¾è±¡ |
| --- | -------------- | ----------------- | -------- |
| A   | ID             | è¨˜äº‹ID            | Ã—        |
| B   | Title          | ã‚¿ã‚¤ãƒˆãƒ«          | Ã—        |
| C   | URL            | è¨˜äº‹URL           | Ã—        |
| D   | PublishedAt    | æŠ•ç¨¿æ—¥            | Ã—        |
| E   | AuthorUsername | è‘—è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼å    | Ã—        |
| F   | AuthorName     | è‘—è€…å            | Ã—        |
| G   | Likes          | ã„ã„ã­æ•°          | â—‹        |
| H   | GrowthRate     | 1æ—¥ã‚ãŸã‚Šã„ã„ã­æ•° | â—‹        |
| I   | Keyword        | å–å¾—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰    | Ã—        |
| J   | MonitorType    | ç›£è¦–ã‚¿ã‚¤ãƒ—        | Ã—        |
| K   | LastUpdated    | æœ€çµ‚æ›´æ–°æ—¥æ™‚      | â—‹        |

### 10.3 NotebookLMé€£æº

ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®URLã‚’NotebookLMã«ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã‚‹ã“ã¨ã§åˆ†æå¯èƒ½ï¼š

```
https://docs.google.com/spreadsheets/d/{spreadsheet_id}
```

---

## 11. ãƒšãƒ¼ã‚¸ãƒ»UIè¨­è¨ˆ

### 11.1 ãƒšãƒ¼ã‚¸æ§‹æˆ

```
/                        # ãƒ›ãƒ¼ãƒ ï¼ˆæ¤œç´¢UIï¼‰
â”œâ”€â”€ /youtube
â”‚   â”œâ”€â”€ /channel/[id]    # ãƒãƒ£ãƒ³ãƒãƒ«åˆ†æï¼ˆæ—¢å­˜ï¼‰
â”‚   â””â”€â”€ /keyword/[query] # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢çµæœï¼ˆæ—¢å­˜ï¼‰
â”œâ”€â”€ /qiita
â”‚   â”œâ”€â”€ /user/[id]       # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨˜äº‹ä¸€è¦§ï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ /keyword/[query] # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢çµæœï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ /zenn
â”‚   â”œâ”€â”€ /user/[username] # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨˜äº‹ä¸€è¦§ï¼ˆæ–°è¦ï¼‰
â”‚   â””â”€â”€ /keyword/[query] # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢çµæœï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ /dashboard           # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆè¦ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
â”‚   â”œâ”€â”€ /settings        # ç›£è¦–è¨­å®šä¸€è¦§
â”‚   â””â”€â”€ /logs            # å–å¾—ãƒ­ã‚°
â”œâ”€â”€ /auth
â”‚   â”œâ”€â”€ /login           # ãƒ­ã‚°ã‚¤ãƒ³
â”‚   â””â”€â”€ /callback        # OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
â”œâ”€â”€ /contact             # ãŠå•ã„åˆã‚ã›ï¼ˆæ—¢å­˜ï¼‰
â”œâ”€â”€ /privacy             # ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ï¼ˆæ—¢å­˜ï¼‰
â””â”€â”€ /disclaimer          # å…è²¬äº‹é …ï¼ˆæ—¢å­˜ï¼‰
```

### 11.2 ç›£è¦–è¨­å®šUIãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç›£è¦–è¨­å®šè¿½åŠ ãƒ•ãƒ­ãƒ¼                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Step 1: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é¸æŠ                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ YouTube â”‚ â”‚  Qiita  â”‚ â”‚  Zenn   â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                    â†“                                        â”‚
â”‚  Step 2: ã‚¿ã‚¤ãƒ—é¸æŠ                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰    â”‚ â”‚ ãƒãƒ£ãƒ³ãƒãƒ«/ãƒ¦ãƒ¼ã‚¶ãƒ¼ â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                    â†“                                        â”‚
â”‚  Step 3: æ¤œç´¢ãƒ»å…¥åŠ›                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ğŸ” æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›...                   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â†’ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ãã®ã¾ã¾ç™»éŒ²                                 â”‚
â”‚  â†’ ãƒãƒ£ãƒ³ãƒãƒ«/ãƒ¦ãƒ¼ã‚¶ãƒ¼: æ¤œç´¢çµæœã‹ã‚‰é¸æŠ                    â”‚
â”‚                    â†“                                        â”‚
â”‚  Step 4: å–å¾—ä»¶æ•°é¸æŠ                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  Lite  â”‚ â”‚  Deep  â”‚ â”‚  Max   â”‚                          â”‚
â”‚  â”‚ 50ä»¶   â”‚ â”‚ 100ä»¶  â”‚ â”‚ 200ä»¶  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                        â”‚
â”‚  Step 5: ç™»éŒ²å®Œäº† â†’ å³åº§ã«åˆå›å–å¾—å®Ÿè¡Œ                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.3 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PrepFeed Dashboard                          [ãƒ¦ãƒ¼ã‚¶ãƒ¼å] â–¼ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“Š Google Sheetsé€£æº                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… é€£æºæ¸ˆã¿: PrepFeed_ãƒ‡ãƒ¼ã‚¿                         â”‚   â”‚
â”‚  â”‚ [ã‚·ãƒ¼ãƒˆã‚’é–‹ã] [é€£æºè§£é™¤]                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ“‹ ç›£è¦–è¨­å®š (3ä»¶)                        [+ è¨­å®šã‚’è¿½åŠ ]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¬ YouTube | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: AI | 100ä»¶ | âœ… æœ‰åŠ¹        â”‚   â”‚
â”‚  â”‚    æœ€çµ‚å–å¾—: 2026/01/22 03:00                        â”‚   â”‚
â”‚  â”‚                                    [ç·¨é›†] [å‰Šé™¤]     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“ Qiita | ãƒ¦ãƒ¼ã‚¶ãƒ¼: @mizchi | 50ä»¶ | âœ… æœ‰åŠ¹        â”‚   â”‚
â”‚  â”‚    æœ€çµ‚å–å¾—: 2026/01/22 03:00                        â”‚   â”‚
â”‚  â”‚                                    [ç·¨é›†] [å‰Šé™¤]     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“˜ Zenn | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: Next.js | 50ä»¶ | âœ… æœ‰åŠ¹       â”‚   â”‚
â”‚  â”‚    æœ€çµ‚å–å¾—: 2026/01/22 03:00                        â”‚   â”‚
â”‚  â”‚                                    [ç·¨é›†] [å‰Šé™¤]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ“œ æœ€è¿‘ã®å–å¾—ãƒ­ã‚°                          [ã™ã¹ã¦è¦‹ã‚‹]    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2026/01/22 03:00 | YouTube | AI | âœ… æˆåŠŸ | 100ä»¶   â”‚   â”‚
â”‚  â”‚ 2026/01/22 03:00 | Qiita | @mizchi | âœ… æˆåŠŸ | 48ä»¶  â”‚   â”‚
â”‚  â”‚ 2026/01/22 03:00 | Zenn | Next.js | âœ… æˆåŠŸ | 50ä»¶   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. å¤–éƒ¨APIä»•æ§˜

### 12.1 YouTube Data API v3

**ä½¿ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

- `search.list` - ãƒãƒ£ãƒ³ãƒãƒ«/å‹•ç”»æ¤œç´¢
- `channels.list` - ãƒãƒ£ãƒ³ãƒãƒ«è©³ç´°
- `playlistItems.list` - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‹•ç”»ä¸€è¦§
- `videos.list` - å‹•ç”»è©³ç´°

**ã‚¯ã‚©ãƒ¼ã‚¿æ¶ˆè²»**:
| æ“ä½œ | æ¶ˆè²» |
|------|------|
| search.list | 100ãƒ¦ãƒ‹ãƒƒãƒˆ |
| channels.list | 1ãƒ¦ãƒ‹ãƒƒãƒˆ |
| playlistItems.list | 1ãƒ¦ãƒ‹ãƒƒãƒˆ |
| videos.list | 1ãƒ¦ãƒ‹ãƒƒãƒˆ |

**1æ—¥ã®ä¸Šé™**: 10,000ãƒ¦ãƒ‹ãƒƒãƒˆ

### 12.2 Qiita API v2

**ä½¿ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

- `GET /api/v2/users/:user_id/items` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨˜äº‹ä¸€è¦§
- `GET /api/v2/items` - è¨˜äº‹æ¤œç´¢

**ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆ**:

- èªè¨¼ã‚ã‚Š: 1,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ™‚
- èªè¨¼ãªã—: 60ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/æ™‚

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:

```json
{
  "id": "abc123",
  "title": "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«",
  "url": "https://qiita.com/user/items/abc123",
  "created_at": "2026-01-01T00:00:00+09:00",
  "likes_count": 100,
  "stocks_count": 50,
  "tags": [{ "name": "JavaScript" }, { "name": "React" }],
  "user": {
    "id": "user_id",
    "name": "User Name"
  }
}
```

### 12.3 Zenn å†…éƒ¨APIï¼ˆéå…¬å¼ï¼‰

**ä½¿ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

- `GET /api/articles?username={username}` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨˜äº‹ä¸€è¦§
- `GET /api/articles?topicname={topic}` - ãƒˆãƒ”ãƒƒã‚¯åˆ¥è¨˜äº‹ä¸€è¦§

**æ³¨æ„äº‹é …**:

- å…¬å¼APIã§ã¯ãªã„ãŸã‚ã€ä»•æ§˜å¤‰æ›´ã®å¯èƒ½æ€§ã‚ã‚Š
- ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã¯æ˜ç¤ºã•ã‚Œã¦ã„ãªã„ãŒã€é©åº¦ãªé–“éš”ã‚’ç©ºã‘ã‚‹

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:

```json
{
  "articles": [
    {
      "id": 12345,
      "title": "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«",
      "slug": "article-slug",
      "published_at": "2026-01-01T00:00:00.000Z",
      "liked_count": 100,
      "user": {
        "username": "username",
        "name": "User Name",
        "avatar_small_url": "https://..."
      }
    }
  ]
}
```

---

## 13. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 2a: åŸºç›¤æ§‹ç¯‰ï¼ˆWeek 1-2ï¼‰

| ã‚¿ã‚¹ã‚¯               | è©³ç´°                       | å„ªå…ˆåº¦ |
| -------------------- | -------------------------- | ------ |
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒãƒ¼ãƒ  | YouTubeã‚¹ã‚³ãƒ¼ãƒ— â†’ PrepFeed | é«˜     |
| Supabaseè¨­å®š         | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã€RLSè¨­å®š      | é«˜     |
| èªè¨¼å®Ÿè£…             | Supabase Authï¼ˆGoogleï¼‰    | é«˜     |
| åŸºæœ¬UI               | ãƒ˜ãƒƒãƒ€ãƒ¼ã€ãƒ•ãƒƒã‚¿ãƒ¼æ›´æ–°     | ä¸­     |

### Phase 2b: ç„¡æ–™æ©Ÿèƒ½æ‹¡å¼µï¼ˆWeek 3-4ï¼‰

| ã‚¿ã‚¹ã‚¯             | è©³ç´°                         | å„ªå…ˆåº¦ |
| ------------------ | ---------------------------- | ------ |
| Qiita APIçµ±åˆ      | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ | é«˜     |
| Zenn APIçµ±åˆ       | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ | é«˜     |
| å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ArticleCardã€ArticleList     | é«˜     |
| ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½         | ã„ã„ã­æ•°ã€æŠ•ç¨¿æ—¥ã€ã‚¹ãƒˆãƒƒã‚¯æ•° | ä¸­     |

### Phase 2c: æœ‰æ–™æ©Ÿèƒ½å®Ÿè£…ï¼ˆWeek 5-6ï¼‰

| ã‚¿ã‚¹ã‚¯         | è©³ç´°               | å„ªå…ˆåº¦ |
| -------------- | ------------------ | ------ |
| Google OAuth   | Sheets APIé€£æº     | é«˜     |
| ç›£è¦–è¨­å®šUI     | è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤   | é«˜     |
| ãƒãƒƒãƒå‡¦ç†     | Vercel Cronè¨­å®š    | é«˜     |
| Upsertãƒ­ã‚¸ãƒƒã‚¯ | å·®åˆ†æ›´æ–°å®Ÿè£…       | é«˜     |
| ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | è¨­å®šä¸€è¦§ã€ãƒ­ã‚°è¡¨ç¤º | ä¸­     |

### Phase 2d: æœ€é©åŒ–ãƒ»ç§»è¡Œæº–å‚™ï¼ˆWeek 7-8ï¼‰

| ã‚¿ã‚¹ã‚¯             | è©³ç´°                  | å„ªå…ˆåº¦ |
| ------------------ | --------------------- | ------ |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | å…¨APIã®ã‚¨ãƒ©ãƒ¼å‡¦ç†å¼·åŒ– | ä¸­     |
| ãƒ­ã‚°æ©Ÿèƒ½           | å–å¾—ãƒ­ã‚°ã®ä¿å­˜ãƒ»è¡¨ç¤º  | ä¸­     |
| Edge Runtimeå¯¾å¿œ   | Cloudflareç§»è¡Œæº–å‚™    | ä¸­     |
| ãƒ†ã‚¹ãƒˆ             | E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…         | ä½     |

---

## 14. å°†æ¥æ‹¡å¼µ

### Phase 3 ä»¥é™ã®å€™è£œ

| æ©Ÿèƒ½           | èª¬æ˜                     | å„ªå…ˆåº¦ |
| -------------- | ------------------------ | ------ |
| TikTokå¯¾å¿œ     | çŸ­å°ºå‹•ç”»ãƒˆãƒ¬ãƒ³ãƒ‰         | ä¸­     |
| noteå¯¾å¿œ       | æ—¥æœ¬èªã‚³ãƒ³ãƒ†ãƒ³ãƒ„         | ä¸­     |
| èª²é‡‘æ©Ÿèƒ½       | Stripeé€£æº               | é«˜     |
| Cloudflareç§»è¡Œ | æœ¬ç•ªç’°å¢ƒç§»è¡Œ             | é«˜     |
| é€šçŸ¥æ©Ÿèƒ½       | ãƒ¡ãƒ¼ãƒ«/Slacké€šçŸ¥         | ä½     |
| ãƒãƒ¼ãƒ æ©Ÿèƒ½     | è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚·ãƒ¼ãƒˆå…±æœ‰ | ä½     |

---

## ä»˜éŒ²

### A. ç’°å¢ƒå¤‰æ•°ä¸€è¦§

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx

# YouTube
YOUTUBE_API_KEY=xxx

# Qiita
QIITA_ACCESS_TOKEN=xxx

# Google OAuth (Sheetsé€£æºç”¨)
GOOGLE_CLIENT_ID=xxx
GOOGLE_CLIENT_SECRET=xxx
GOOGLE_REDIRECT_URI=https://prepfeed.vercel.app/api/google/callback

# Vercel KV
KV_REST_API_URL=xxx
KV_REST_API_TOKEN=xxx

# ãã®ä»–
NEXT_PUBLIC_SITE_URL=https://prepfeed.vercel.app
CRON_SECRET=xxx  # ãƒãƒƒãƒAPIä¿è­·ç”¨
```

### B. vercel.jsonï¼ˆCronè¨­å®šï¼‰

```json
{
  "crons": [
    {
      "path": "/api/batch",
      "schedule": "0 18 * * *"
    }
  ]
}
```

### C. å‹å®šç¾©

```typescript
// ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
type Platform = 'youtube' | 'qiita' | 'zenn';

// ç›£è¦–ã‚¿ã‚¤ãƒ—
type MonitorType = 'keyword' | 'channel' | 'user';

// å–å¾—ä»¶æ•°
type FetchCount = 50 | 100 | 200;

// ç›£è¦–è¨­å®š
interface MonitorSetting {
  id: string;
  user_id: string;
  platform: Platform;
  type: MonitorType;
  value: string;
  display_name?: string;
  fetch_count: FetchCount;
  is_active: boolean;
  last_fetched_at?: string;
  created_at: string;
  updated_at: string;
}

// Qiitaè¨˜äº‹
interface QiitaArticle {
  id: string;
  title: string;
  url: string;
  published_at: string;
  likes_count: number;
  stocks_count: number;
  tags: string[];
  author_id: string;
  author_name: string;
  days_from_published: number;
  growth_rate: number;
}

// Zennè¨˜äº‹
interface ZennArticle {
  id: string;
  title: string;
  url: string;
  published_at: string;
  liked_count: number;
  author_username: string;
  author_name: string;
  days_from_published: number;
  growth_rate: number;
}

// å–å¾—ãƒ­ã‚°
interface FetchLog {
  id: string;
  user_id: string;
  setting_id: string;
  platform: Platform;
  status: 'success' | 'error';
  records_count?: number;
  error_message?: string;
  executed_at: string;
}
```

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆçµ‚äº†**
