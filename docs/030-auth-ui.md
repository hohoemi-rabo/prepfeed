# 030: 認証UI（ログインページ・ユーザーメニュー）

## 概要

ログインページの作成と、ヘッダーへの認証状態表示（ログイン/ログアウト、ユーザーアバター）を実装する。

## 背景

認証基盤（029）の上にUI層を構築し、ユーザーがログイン・ログアウトできるようにする。

## 要件

### ログインページ（`/auth/login`）

- [x] 「Googleでログイン」ボタン
- [x] PrepFeedのロゴ・説明文
- [x] 有料機能の概要紹介（なぜログインが必要か）— 監視設定・AI分析・ダッシュボード
- [x] ログイン中のローディング表示（スピナー + disabled状態）
- [x] エラー時のメッセージ表示

### ヘッダー更新

- [x] 未認証時: 「ログイン」ボタン表示
- [x] 認証済み時: ユーザーアバター + ドロップダウンメニュー
  - ダッシュボードリンク
  - ログアウトボタン
- [x] モバイルメニューにも同様の認証状態表示

### 認証状態の取得

- [x] サーバーサイドでのセッション取得（layout.tsx → Header props）
- [x] ミドルウェアによるセッションリフレッシュで状態を常に最新に

## 受け入れ条件

- [x] `/auth/login` でログインページが表示される
- [x] Googleログイン後にダッシュボードにリダイレクトされる
- [x] ヘッダーにユーザーアバターが表示される
- [x] ドロップダウンからログアウトできる
- [x] 未認証時はヘッダーに「ログイン」ボタンが表示される
- [x] モバイルメニューでも認証UIが正しく動作する
- [x] `npm run build` が成功する

## 備考

本チケットの大部分は #029 で先行実装済み。本チケットでは以下を追加:
- ログインページに機能紹介セクション（監視設定・AI分析・ダッシュボード）
- ログインボタンのローディング状態（スピナー + disabled）

## 依存関係

- 029（Supabase Auth認証実装）

## 関連ファイル

- `src/app/auth/login/page.tsx`（更新 — 機能紹介・ローディング追加）
- `src/components/Header.tsx`（#029で更新済み）
- `src/components/UserMenu.tsx`（#029で作成済み）
